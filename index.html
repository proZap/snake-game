<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="JavasCript snake game with 60fps animation"><meta name="keywords" content="snake, snake game, snakegame"><meta name="author" content="Zap"><title>Snake</title><style>*{margin:0;padding:0}html,body{width:100%;height:100%}body{background:linear-gradient(90deg,#00d2ff 0%,#3a47d5 100%)}canvas{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);background:#1e1e1e;display:block;border-radius:5px;box-shadow:0 0 0 5pt #fff}</style></head><body><canvas id="canvas"></canvas></body><script>function snake(a,b){this.score=3,this.dir="d",this.width=a,this.height=b,this.occupiedSpace=Array(b);for(var c=0;c<b;c++){this.occupiedSpace[c]=Array(a);for(var d=0;d<a;d++)this.occupiedSpace[c][d]=!1}this.head={x:Math.floor(Math.random()*(a/2-2))+3,y:Math.floor(Math.random()*b)},this.tail={x:this.head.x-2,y:this.head.y},this.lastHead={x:this.head.x-1,y:this.head.y},this.lastTail={x:this.head.x-3,y:this.head.y},this.anchors=[],this.occupiedSpace[this.head.y][this.head.x]=!0,this.occupiedSpace[this.head.y][this.head.x-1]=!0,this.occupiedSpace[this.head.y][this.head.x-2]=!0,this.updatePos=function(c,d){0<this.anchors.length&&this.tail.x==this.anchors[0].x&&this.tail.y==this.anchors[0].y&&this.anchors.shift(),c!=this.dir&&this.anchors.push({x:this.head.x,y:this.head.y}),this.dir=c,this.lastHead={x:this.head.x,y:this.head.y},this.lastTail={x:this.tail.x,y:this.tail.y},this.occupiedSpace[this.tail.y][this.tail.x]=!1,this.tail=0<this.anchors.length?{x:this.tail.x==this.anchors[0].x?this.tail.x:this.tail.x+(this.anchors[0].x-this.tail.x)/Math.abs(this.anchors[0].x-this.tail.x),y:this.tail.y==this.anchors[0].y?this.tail.y:this.tail.y+(this.anchors[0].y-this.tail.y)/Math.abs(this.anchors[0].y-this.tail.y)}:{x:this.tail.x==this.head.x?this.tail.x:this.tail.x+(this.head.x-this.tail.x)/Math.abs(this.head.x-this.tail.x),y:this.tail.y==this.head.y?this.tail.y:this.tail.y+(this.head.y-this.tail.y)/Math.abs(this.head.y-this.tail.y)};var e={w:{x:0,y:-1},a:{x:-1,y:0},s:{x:0,y:1},d:{x:1,y:0}};return this.head={x:this.head.x+e[c].x,y:this.head.y+e[c].y},this.head.x>=a||this.head.y>=b||0>this.head.x||0>this.head.y||this.occupiedSpace[this.head.y][this.head.x]?(d.gameOver=!0,d.gameRunning=!1,alert("Game over!"),void d.restart()):this.head.x==d.apple.x&&this.head.y==d.apple.y&&(this.score++,d.appleEaten=!0,this.tail={x:this.lastTail.x,y:this.lastTail.y},this.occupiedSpace[this.tail.y][this.tail.x]=!0,this.score==a*b)?void(d.won=!0):void(this.occupiedSpace[this.head.y][this.head.x]=!0)}}function draw(){this.tile_size=48,this.canvasSize=.9,this.canvas=document.getElementById("canvas"),this.contex=canvas.getContext("2d"),this.getSize=function(){return{x:Math.floor(innerWidth*this.canvasSize/this.tile_size),y:Math.floor(innerHeight*this.canvasSize/this.tile_size)}},this.setCanvasSize=function(a,b){this.canvas.width=a*this.tile_size,this.canvas.height=b*this.tile_size},this.resizeCanvas=function(a,b){this.tile_size=innerWidth*this.canvasSize/(innerHeight*this.canvasSize)>a/b?innerHeight*this.canvasSize/b:innerWidth*this.canvasSize/a,this.setCanvasSize(a,b)},this.drawCircle=function(a,b,c){this.contex.beginPath(),this.contex.arc(a.x*this.tile_size+this.tile_size/2,a.y*this.tile_size+this.tile_size/2,this.tile_size/2*b,0,2*Math.PI),this.contex.fillStyle=c,this.contex.fill()},this.connect=function(a,b,c,d){return a.x>b.x||a.y>b.y?void this.connect(b,a,c,d):void(this.contex.beginPath(),this.contex.fillRect(a.x*this.tile_size+this.tile_size/2,a.y*this.tile_size+this.tile_size/2*(1-c),(b.x-a.x)*this.tile_size,this.tile_size*c),this.contex.fillStyle=d,this.contex.fill(),this.contex.beginPath(),this.contex.fillRect(a.x*this.tile_size+this.tile_size/2*(1-c),a.y*this.tile_size+this.tile_size/2,this.tile_size*c,(b.y-a.y)*this.tile_size),this.contex.fillStyle=d,this.contex.fill())},this.renderSnake=function(a,b,c){this.contex.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawCircle(b,.64,"#FF0800");var d={x:a.lastHead.x+(a.head.x-a.lastHead.x)*(c/9),y:a.lastHead.y+(a.head.y-a.lastHead.y)*(c/9)},e={x:a.lastTail.x+(a.tail.x-a.lastTail.x)*(c/9),y:a.lastTail.y+(a.tail.y-a.lastTail.y)*(c/9)};if(this.drawCircle(e,.8,"#1d8cea"),this.drawCircle(d,.8,"#1d8cea"),0==a.anchors.length)this.connect(e,d,.8,"#1d8cea");else{this.connect(e,a.anchors[0],.8,"#1d8cea"),this.connect(d,a.anchors[a.anchors.length-1],.8,"#1d8cea");for(var f=0;f<a.anchors.length;f++)this.drawCircle(a.anchors[f],.8,"#1d8cea"),f<a.anchors.length-1&&this.connect(a.anchors[f],a.anchors[f+1],.8,"#1d8cea")}}}new function game(){var a=this;this.restart=function(){this.won=!1,this.gameRunning=!1,this.gameOver=!1,this.renderer=new draw,this.gridSize=this.renderer.getSize(),this.renderer.setCanvasSize(this.gridSize.x,this.gridSize.y),this.snake=new snake(this.gridSize.x,this.gridSize.y),this.appleEaten=!1,this.apple=null,this.ctrlQueue="",this.listen(),this.placeApple(),this.gameLoop(4)},window.addEventListener("resize",function(){a.renderer.resizeCanvas(a.gridSize.x,a.gridSize.y),a.renderer.renderSnake(a.snake,a.apple,0)},!1),this.placeApple=function(){do a.apple={x:Math.floor(Math.random()*a.gridSize.x),y:Math.floor(Math.random()*a.gridSize.y)};while(a.snake.occupiedSpace[a.apple.y][a.apple.x])},this.listen=function(){var a=this,b={38:"w",39:"d",40:"s",37:"a",75:"w",76:"d",74:"s",72:"a",87:"w",68:"d",83:"s",65:"a"};document.addEventListener("keydown",function(c){var d=c.altKey||c.ctrlKey||c.metaKey||c.shiftKey,e=b[c.which];d||e==null||(a.ctrlQueue+=e,!a.gameRunning&&!a.gameOver&&(a.gameRunning=!0,a.gameLoop(5)))})},this.gameLoop=function(b){if(0==b){this.appleEaten&&(this.won&&(alert("You win!"),this.restart()),this.appleEaten=!1,this.placeApple());for(var c={w:"s",a:"d",s:"w",d:"a"},d=this.snake.dir;(this.ctrlQueue[0]==this.snake.dir||c[this.ctrlQueue[0]]==this.snake.dir)&&0<this.ctrlQueue.length;)this.ctrlQueue=this.ctrlQueue.substring(1);0<this.ctrlQueue.length&&(d=this.ctrlQueue[0]),this.snake.updatePos(d,this)}this.renderer.renderSnake(this.snake,this.apple,b),this.gameRunning&&setTimeout(function(){a.gameLoop((b+1)%10)},50/3)},this.restart()};</script></html>